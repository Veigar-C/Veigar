<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 设置为IUserDao接口方法提供sql语句配置 -->
<mapper namespace="com.veigar.dao.IUserDao">

    <select id="selectDriver" resultType="DrivingLicense" >
        SELECT * FROM drivinglicense WHERE carNum = #{carNum}
    </select>

    <!--配置一个resultMap 指定返回的类型 -->
    <resultMap id="ListVR" type="ViolationRecord">
        <id column="carNum" property="carNum" />
        <result column="vContent" property="vContent" />
        <result column="vDate" property="vDate" />
        <result column="vState" property="vState" />
        <result column="vPoints" property="vPoints" />
        <result column="vMoney" property="vMoney" />
        <result column="vSMoney" property="vSMoney" />
        <result column="vAddress" property="vAddress" />
    </resultMap>
    <select id="selectRecord" resultMap="ListVR" >
        SELECT * FROM violationrecord WHERE carNum = #{carNum}
    </select>

    <!--配置一个resultMap 指定返回的类型 -->
    <resultMap id="ListDR" type="Driver">
        <id column="id" property="id" />
        <result column="name" property="name" />
        <result column="address" property="address" />
        <result column="carNum" property="carNum" />
        <result column="sex" property="sex" />
        <result column="idCard" property="idCard" />
        <result column="birth_Date" property="birth_Date" />
        <result column="issue_Date" property="issue_Date" />
        <result column="permit_Type" property="permit_Type" />
        <result column="expiration_Date" property="expiration_Date" />
    </resultMap>
    <select id="selectAllDriver" parameterType="hashmap" resultMap="ListDR" >
        SELECT * FROM driver WHERE id &gt; (#{page}*#{rows}) ORDER BY id ASC LIMIT #{rows}
    </select>

    <select id="getCount_Driver" resultType="int" >
        SELECT count(id) FROM driver
    </select>

    <select id="delById" resultType="int" >
        DELETE FROM driver WHERE id = #{id}
    </select>

    <select id="addDriver"  parameterType="hashmap" resultType="int" >
        INSERT INTO driver (name,address,carNum,sex,idCard,birth_Date,issue_Date,permit_Type,expiration_Date)
          VALUES (#{name}, #{address},#{carNum},#{sex},#{idCard},#{birth_Date},#{issue_Date},#{permit_Type},#{expiration_Date})
    </select>

    <select id="checkDriver" resultType="int" >
        SELECT IFNULL(MAX(id),0) AS id FROM driver where idCard=#{idCard} or carNum=#{carNum}
    </select>

    <select id="login" parameterType="hashmap" resultType="int" >
        SELECT IFNULL(MAX(id),0) AS id FROM admin where username=#{username} and password=#{password}
    </select>
</mapper>